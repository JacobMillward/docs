---
id: mailchimp
title: Mailchimp Integration
---

[Mailchimp](https://www.mailchimp.com) is an email marketing platform that provides tools and services to help businesses send
marketing emails, newsletters, and automated campaigns to their customers. It allows you to create, manage, and send emails to
your subscribers, as well as segment and target specific groups of subscribers based on their interests and behaviors.

To synchronize user data between Ory Actions and Mailchimp, you would need to follow these high-level steps:

1. Create an account on Mailchimp.
1. Create a new list in Mailchimp.
1. Create a [Mailchimp API key](https://mailchimp.com/en-gb/help/about-api-keys/).
1. Configure the Ory Action to synchroinze user data with Mailchimp.
1. Test the integration by signing up with a test account in your Ory Network project and checking that the corresponding user
   data is being updated in Mailchimp.

:::note

Make sure to also consider the data privacy laws and regulations that may apply to your use case.

:::

## Configuration

:::info

Unsure what JsonNet is? Read the [Ory Actions webhook guide](../../guides/integrate-with-ory-cloud-through-webhooks.mdx).

:::

First, we create a JsonNet file. It transforms the identity data from Ory to a format Mailchimp understands:

:::info

For Mailchimp, you must pass the API key in the request body. This means you must include it in the Jsonnet snippet.

:::

```jsonnet title="./mailchimp_identify.jsonnet"
function(ctx) {
  key: "<Your-Api-Key>",
  message: {
    from_email: "hello@example.com",
    subject: "Hello from Ory",
    text: "Welcome to Ory! Have fun and happy hacking!",
    to: [
      {
        email: ctx.identity.verifiable_addresses[0].value,
        type: "to"
      }
    ]
  }
}
```

To use this JsonNet snippet, we need to encode it to base64 and save it to the clipboard:

```shell
cat mailchimp_identify.jsonnet | base64 | pbcopy
```

Next, we define the Ory Action as a JSON Object

```json title="./webhook-action.json"
{
  "hook": "web_hook",
  "config": {
    "url": "https://mandrillapp.com/api/1.0/messages/send",
    "method": "POST",
    "body": "base64://ENCODED_JSONNET"
  }
}
```

and replace the values. The result will look something like this:

```json title="webhook-action.json"
{
  "hook": "web_hook",
  "config": {
    "response": {
      "ignore": true
    },
    "url": "https://mandrillapp.com/api/1.0/messages/send",
    "method": "POST",
    "body": "base64://CmZ1bmN0aW9uKGN0eCkgewogIGtleTogIjxZb3VyLUFwaS1LZXk+IiwKICBtZXNzYWdlOiB7CiAgICBmcm9tX2VtYWlsOiAiaGVsbG9AZXhhbXBsZS5jb20iLAogICAgc3ViamVjdDogIkhlbGxvIGZyb20gT3J5IiwKICAgIHRleHQ6ICJXZWxjb21lIHRvIE9yeSEgSGF2ZSBmdW4gYW5kIGhhcHB5IGhhY2tpbmchIiwKICAgIHRvOiBbCiAgICAgIHsKICAgICAgICBlbWFpbDogY3R4LmlkZW50aXR5LnZlcmlmaWFibGVfYWRkcmVzc2VzWzBdLnZhbHVlLAogICAgICAgIHR5cGU6ICJ0byIKICAgICAgfQogICAgXQogIH0KfQ=="
  }
}
```

The last step is to add this action to your Ory Network Project using the Ory CLI. Here, we trigger this webhook after successful
registration:

```shell
ory patch identity-config {project.id} \
  --add "/selfservice/flows/registration/after/hooks/0=$(cat webhook-action.json)" \
  --format yaml
```

You may also trigger this webhook only when the user signs up with a password or social sign in:

```shell
ory patch identity-config {project.id} \
  --add "/selfservice/flows/registration/after/password/hooks/0=$(cat webhook-action.json)" \
  --format yaml
```
