---
id: mailchimp
title: Mailchimp Integration
---

Use this configuration to send emails to users with [Mailchimp](https://mailchimp.com/)

````mdx-code-block
import CodeBlock from '@theme/CodeBlock'
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs groupId="wherehosted">
  <TabItem value="cloud" label="The Ory Network" default>

```yaml
  - hook: web_hook
    config:
      url: https://mandrillapp.com/api/1.0/messages/send
      method: POST
      # Encode the Jsonnet with Base64 and add the encoded string to 'body'.
      body: base64://ENCODED_JSONNET
```

  </TabItem>
  <TabItem value="selfhosted" label="Self-Hosted Ory Kratos Config">

```yaml title="path/to/my/kratos.config.yml"
  - hook: web_hook
    config:
      url: https://mandrillapp.com/api/1.0/messages/send
      method: POST
      body: /path/to/my/mandrillapp.jsonnet
```

  </TabItem>
</Tabs>
````

Request body Jsonnet:

:::info

For Mailchimp, you must pass the API key in the request body. This means you must include it in the Jsonnet snippet.

:::

```jsonnet title="Mailchimp request body"
function(ctx) {
  key: "<Your-Api-Key>",
  message: {
    from_email: "hello@example.com",
    subject: "Hello from Ory",
    text: "Welcome to Ory! Have fun and happy hacking!",
    to: [
      {
        email: ctx.identity.verifiable_addresses[0].value,
        type: "to"
      }
    ]
  }
}
```
